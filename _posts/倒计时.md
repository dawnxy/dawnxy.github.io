---
title: 倒计时
date: 2017-11-07 18:44:20
categories: 实战笔记
---

```javascript
<!--开始的服务器时间-->
<input type="hidden" id="systemTime"/>

<script>
    var systemTimeVal = $("#systemTime").val();
    var systemTime = parseInt(systemTimeVal) - 1000;
    $(".countdown .p-time").each(function(index,item){
        showTime(this,systemTime);
    });
    function showTime(obj,systemTime) {
        systemTime = parseInt(systemTime) + 1000;
        var time_distance=$(obj).attr("data-bidstarttime")-systemTime;
        if(time_distance<=0){
            clearInterval(timer);
        }
        var int_day=Math.floor(time_distance/86400000);
        time_distance=time_distance%86400000;
        var int_hour=Math.floor(time_distance/3600000);
        time_distance=time_distance%3600000;
        var int_minute=Math.floor(time_distance/60000);
        time_distance=time_distance%60000;
        var int_second=Math.floor(time_distance/1000);
        var timeStr=zero(int_hour)+" : "+zero(int_minute)+" : "+zero(int_second);
        $(obj).html(timeStr);
        var timer=setTimeout(function(){
            showTime(obj,systemTime);
        }, 1000);
    }
    function zero(n) {
        return n<10?"0"+n:n;
    }
</script>
```
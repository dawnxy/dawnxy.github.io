---
title: 检测数据类型的方式
date: 2016-11-24 18:44:20
categories: JavaScript
---

检测数据类型的方式通常有四种：
- typeof
- instanceof
- constructor
- Object.prototype.toString.call()

# typeof
检测数据类型的关键字
**语法**：typeof [obj]
**返回值**：字符串
**特点**：只能检测`number` ,`string ` ,`boolean` ,`undefined` ,`object` ,`function`这6种数据类型，不能详细区分object下的数据类型
typeof null-->'object'，因为null是一个空对象指针
```javascript
console.log(typeof [])//'object'
console.log(typeof null)//'object'
```

如果运算中有两个以上的typeof，最终返回结果'string'
```javascript
console.log(typeof(typeof []));//'string'
```

# instanceof
检测当前实例是否属于某个类
**语法**：[obj] instanceof [Object]
**返回值**：true/false
**特点**：不能精确判断object下细分的数据类型。只要在这个实例的原型链上的类，用instanceof检测的时候都为true。
```javascript
//所有类都是Object的基类
console.log([] instanceof Array);//true
console.log([] instanceof Object);//true
console.log(/^\w$/ instanceof RegExp);//true
console.log(/^\w$/ instanceof Object);//true
```

# constructor
检测当前实例是否属于某个类
**语法**：[obj].constructor==[Object]
**返回值**：true/false
**特点**：可以检测object下细分的数据类型，但是constructor可以让用户自己来修改,所以我们一般不用这个来检测
```
console.log(([]).constructor==Array);//true
console.log(([]).constructor==Object);//false
```

# Object.prototype.toString.call()
常用而且相对来说精准的检测方式,上述方式出现的缺陷在这里都弥补了
**语法**：Object.prototype.toString.call([obj])
**toString()原理**：
先在自己身上找有没有toString()方法，如果有，就是转化为字符串
```javascript
console.log((123).toString());//'123'
```

如果没有，往上查找，一直查找到基类Object，在Object.prototype上有一个toString()方法，这个方法执行的时候,会返回方法中this关键字对应数据值的数据类型
```javascript
console.log(Object.prototype.toString());//'[object Object]'
console.log(Object.prototype.toString.call([]));//'[object Array]'
console.log(Object.prototype.toString.call(/^\w$/));//'[object RegExp]'
```